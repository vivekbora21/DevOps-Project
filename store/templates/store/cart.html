{% extends "base.html" %}

{% block title %}Cart | E-Commerce{% endblock %}

{% block content %}
<div style="width: 90%; margin: 2rem auto;">
    <h2>Your Shopping Cart</h2>

    {% if cart_items %}
    <table style="width:100%; border-collapse: collapse; margin-top:1rem; background:white; box-shadow:0 2px 6px rgba(0,0,0,0.1);">
        <tr style="background:#2c3e50; color:white;">
            <th style="padding:10px;">Product</th>
            <th style="padding:10px;">Price</th>
            <th style="padding:10px;">Quantity</th>
            <th style="padding:10px;">Total</th>
            <th style="padding:10px;">Actions</th>
        </tr>
        {% for item in cart_items %}
        <tr style="text-align:center;">
            <td style="padding:10px;">{{ item.product.name }}</td>
            <td>${{ item.product.price }}</td>
            <td>
                <form method="post" action="{% url 'update_quantity' item.id %}" style="display:inline;">
                    {% csrf_token %}
                    <input type="number" name="quantity" value="{{ item.quantity }}" min="0" style="width:50px;" readonly>
                    <button type="submit" class="btn btn-primary" style="padding:5px 10px;">Update</button>
                </form>
            </td>
            <td>${{ item.total_price }}</td>
            <td>
                <form method="post" action="{% url 'update_quantity' item.id %}" style="display:inline;">
                    {% csrf_token %}
                    <input type="hidden" name="quantity" value="0">
                    <button type="submit" class="btn btn-danger" style="padding:5px 10px;">Remove</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </table>

    <div style="text-align:right; margin-top:1rem;">
        <h3>Total: ${{ total }}</h3>
        <a href="#" class="btn">Proceed to Checkout</a>
    </div>
    {% else %}
    <p>Your cart is empty.</p>
    {% endif %}
</div>
{% endblock %}
